<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rewrite Moment - ë‚˜ë§Œì˜ ì˜í™” ë§Œë“¤ê¸°</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¬</text></svg>">
</head>
<body>
  <div class="bg-pattern"></div>
  <div class="noise-overlay"></div>

  <!-- Navigation -->
  <nav class="nav">
    <div class="container nav-inner">
      <a href="index.html" class="nav-logo">
        <div class="nav-logo-icon">ğŸ¬</div>
        <span class="nav-logo-text">Rewrite Moment</span>
      </a>
      <ul class="nav-links">
        <li><a href="index.html#features" class="nav-link">ê¸°ëŠ¥</a></li>
        <li><a href="index.html#how" class="nav-link">ì´ìš©ë°©ë²•</a></li>
        <li><a href="pricing.html" class="nav-link">ê°€ê²©</a></li>
      </ul>
      <div class="nav-auth">
        <div class="nav-credits">
          <span class="nav-credits-icon">ğŸ’</span>
          <span class="nav-credits-value" id="nav-credits">0</span>
          <span style="color: var(--text-muted)">í¬ë ˆë”§</span>
        </div>
        <button class="btn-login" id="btn-open-login" onclick="openAuthModal('login')">ë¡œê·¸ì¸</button>
        <div class="user-menu hidden" id="user-menu">
          <div class="user-avatar" id="user-avatar" onclick="toggleUserDropdown()">U</div>
          <div class="user-dropdown" id="user-dropdown">
            <div class="user-dropdown-header">
              <div class="user-dropdown-name" id="user-name">ì‚¬ìš©ì</div>
              <div class="user-dropdown-email" id="user-email">user@email.com</div>
            </div>
            <div class="user-dropdown-menu">
              <a href="pricing.html" class="user-dropdown-item">ğŸ’ í¬ë ˆë”§ ì¶©ì „</a>
              <a href="#" class="user-dropdown-item">ğŸ“‹ ë‚´ ì˜ìƒ</a>
              <div class="user-dropdown-item logout" onclick="logout()">ğŸšª ë¡œê·¸ì•„ì›ƒ</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="page" style="padding-top: 100px;">
    <div class="container container-sm">
      
      <!-- Progress Steps -->
      <div class="steps">
        <div class="step completed">
          <div class="step-number">âœ“</div>
          <span class="step-text">ì—…ë¡œë“œ</span>
        </div>
        <div class="step-line completed"></div>
        <div class="step completed">
          <div class="step-number">âœ“</div>
          <span class="step-text">ì„ íƒ</span>
        </div>
        <div class="step-line completed"></div>
        <div class="step active">
          <div class="step-number">3</div>
          <span class="step-text">Rewrite</span>
        </div>
        <div class="step-line"></div>
        <div class="step">
          <div class="step-number">4</div>
          <span class="step-text">ê²°ê³¼</span>
        </div>
      </div>

      <!-- Page Header -->
      <div class="page-header" data-animate>
        <h1 class="page-title">
          <span class="text-gradient">Rewrite</span> Moment
        </h1>
        <p class="page-subtitle">
          ìŠì§€ ëª»í•˜ëŠ” ìˆœê°„ì„ ë‹¤ë¥¸ ê²°ë§ë¡œ ì¬êµ¬ì„±í•´ë³´ì„¸ìš”.<br>
          <span style="color: var(--text-muted);">(ì„ íƒ ì‚¬í•­ - ê±´ë„ˆë›°ì–´ë„ ë©ë‹ˆë‹¤)</span>
        </p>
      </div>

      <!-- Rewrite Toggle -->
      <div class="rewrite-toggle card" data-animate style="animation-delay: 0.1s">
        <label class="toggle-switch">
          <input type="checkbox" id="rewriteEnabled">
          <span class="toggle-slider"></span>
          <span class="toggle-label">
            <span class="toggle-title">Rewrite Moment ì‚¬ìš©í•˜ê¸°</span>
            <span class="toggle-desc">ë°”ê¾¸ê³  ì‹¶ì€ ê¸°ì–µì„ ì…ë ¥í•˜ë©´ ë‹¤ë¥¸ ê²°ë§ë¡œ ì¬êµ¬ì„±ë©ë‹ˆë‹¤ (+1 í¬ë ˆë”§)</span>
          </span>
        </label>
      </div>

      <!-- Rewrite Content (Initially Hidden) -->
      <div class="rewrite-content" id="rewriteContent">
        
        <!-- Safety Notice -->
        <div class="safety-notice" data-animate style="animation-delay: 0.2s">
          <div class="safety-icon">ğŸ”’</div>
          <div class="safety-text">
            <strong>ì•ˆì „ ê°€ì´ë“œ</strong>
            <p>ì‹¤ëª…, í•™êµ, íšŒì‚¬, ì£¼ì†ŒëŠ” ì ì§€ ë§ì•„ì£¼ì„¸ìš”.<br>ì…ë ¥í•œ ë‚´ìš©ì€ ìœ ì‚¬ ìƒí™©ìœ¼ë¡œ ìƒì§•í™”ë˜ì–´ ì¬êµ¬ì„±ë©ë‹ˆë‹¤.</p>
          </div>
        </div>

        <!-- Event Input -->
        <section class="rewrite-section" data-animate style="animation-delay: 0.3s">
          <h3 class="rewrite-section-title">ë°”ê¾¸ê³  ì‹¶ì€ ìˆœê°„</h3>
          <div class="form-group">
            <textarea 
              class="form-textarea" 
              id="eventText"
              placeholder="ì˜ˆ: ê·¸ë‚  ë°œí‘œì—ì„œ ë„ˆë¬´ ì°½í”¼í–ˆì–´â€¦ ì¤€ë¹„ë¥¼ ì—´ì‹¬íˆ í–ˆëŠ”ë° ë¨¸ë¦¬ê°€ ìƒˆí•˜ì–˜ì¡Œì–´."
              rows="4"
              maxlength="300"
            ></textarea>
            <div class="form-hint">
              <span id="charCount">0</span>/300ì Â· êµ¬ì²´ì ì¸ ê°ì •ê³¼ ìƒí™©ì„ ì ì–´ì£¼ì„¸ìš”
            </div>
          </div>
        </section>

        <!-- Distance Mode -->
        <section class="rewrite-section" data-animate style="animation-delay: 0.4s">
          <h3 class="rewrite-section-title">ê±°ë¦¬ë‘ê¸°</h3>
          <p class="rewrite-section-desc">ì›ë³¸ ì‚¬ê±´ê³¼ ì–¼ë§ˆë‚˜ ë¹„ìŠ·í•˜ê²Œ ì¬êµ¬ì„±í• ê¹Œìš”?</p>
          <div class="distance-options">
            <label class="distance-card">
              <input type="radio" name="distance" value="symbolic">
              <div class="distance-card-inner">
                <div class="distance-icon">ğŸŒ«ï¸</div>
                <div class="distance-title">ìƒì§•ì ìœ¼ë¡œ</div>
                <div class="distance-desc">ê°€ì¥ ì•ˆì „í•œ ë°©ì‹<br>ë©”íƒ€í¬ë¡œ í‘œí˜„</div>
              </div>
            </label>

            <label class="distance-card active">
              <input type="radio" name="distance" value="similar" checked>
              <div class="distance-card-inner">
                <div class="distance-icon">ğŸ”„</div>
                <div class="distance-title">ìœ ì‚¬ ìƒí™©</div>
                <div class="distance-desc">ë¹„ìŠ·í•˜ì§€ë§Œ ë‹¤ë¥¸<br>ìƒí™©ìœ¼ë¡œ ì¬êµ¬ì„±</div>
              </div>
            </label>

            <label class="distance-card">
              <input type="radio" name="distance" value="quite_similar">
              <div class="distance-card-inner">
                <div class="distance-icon">ğŸ¯</div>
                <div class="distance-title">ê½¤ ë¹„ìŠ·í•˜ê²Œ</div>
                <div class="distance-desc">ë” ëª°ì…ë˜ì§€ë§Œ<br>ì§ì ‘ ì¬í˜„ì€ ê¸ˆì§€</div>
              </div>
            </label>
          </div>
        </section>

        <!-- Desired Ending -->
        <section class="rewrite-section" data-animate style="animation-delay: 0.5s">
          <h3 class="rewrite-section-title">ë°”ê¿€ ê²°ë§</h3>
          <p class="rewrite-section-desc">ì–´ë–¤ ë°©í–¥ì˜ ì—”ë”©ì„ ì›í•˜ì‹œë‚˜ìš”?</p>
          <div class="ending-options">
            <label class="ending-card">
              <input type="radio" name="ending" value="recovery">
              <span class="ending-emoji">ğŸ’š</span>
              <span class="ending-text">íšŒë³µ</span>
            </label>

            <label class="ending-card active">
              <input type="radio" name="ending" value="growth" checked>
              <span class="ending-emoji">ğŸŒ±</span>
              <span class="ending-text">ì„±ì¥</span>
            </label>

            <label class="ending-card">
              <input type="radio" name="ending" value="reconcile">
              <span class="ending-emoji">ğŸ¤</span>
              <span class="ending-text">í™”í•´</span>
            </label>

            <label class="ending-card">
              <input type="radio" name="ending" value="self_protect">
              <span class="ending-emoji">ğŸ›¡ï¸</span>
              <span class="ending-text">ìê¸°ë³´í˜¸</span>
            </label>

            <label class="ending-card">
              <input type="radio" name="ending" value="new_start">
              <span class="ending-emoji">ğŸš€</span>
              <span class="ending-text">ìƒˆì¶œë°œ</span>
            </label>

            <label class="ending-card">
              <input type="radio" name="ending" value="comedy">
              <span class="ending-emoji">ğŸ˜„</span>
              <span class="ending-text">ì½”ë¯¸ë”” ìŠ¹í™”</span>
            </label>
          </div>
        </section>

        <!-- What Happens -->
        <div class="what-happens card" data-animate style="animation-delay: 0.6s">
          <h4>ğŸ¬ ì´ë ‡ê²Œ ì¬êµ¬ì„±ë©ë‹ˆë‹¤</h4>
          <ul>
            <li>ì…ë ¥í•œ ì‚¬ê±´ì€ <strong>ìœ ì‚¬í•œ ê°€ìƒ ìƒí™©</strong>ìœ¼ë¡œ ë³€í™˜ë©ë‹ˆë‹¤</li>
            <li>ì‹¤ëª…, í•™êµ, íšŒì‚¬ ë“± ì‹ë³„ ê°€ëŠ¥í•œ ì •ë³´ëŠ” <strong>ìë™ìœ¼ë¡œ ì œê±°</strong>ë©ë‹ˆë‹¤</li>
            <li>ì„ íƒí•œ ê²°ë§ ë°©í–¥ìœ¼ë¡œ <strong>ì—”ë”© í´ë¦½(Clip 3)</strong>ì´ ì¬êµ¬ì„±ë©ë‹ˆë‹¤</li>
            <li>Trailer ëª¨ë“œì—ì„œëŠ” ì¤‘ê°„ ì¥ë©´ì—ë„ Rewriteê°€ ë°˜ì˜ë©ë‹ˆë‹¤</li>
          </ul>
        </div>
      </div>

      <!-- Actions -->
      <div class="actions-row mt-xl" data-animate style="animation-delay: 0.7s">
        <a href="select.html" class="btn btn-ghost">
          â† ì´ì „
        </a>
        <div class="actions-right">
          <button class="btn btn-secondary" id="skipBtn">
            ê±´ë„ˆë›°ê¸°
          </button>
          <button class="btn btn-primary btn-lg" id="generateBtn">
            ì˜ìƒ ìƒì„±í•˜ê¸°
            <span>ğŸ¬</span>
          </button>
        </div>
      </div>

      <!-- Disclaimer -->
      <div class="disclaimer mt-xl" data-animate style="animation-delay: 0.8s">
        <strong>ì•ˆë‚´:</strong> Rewrite Momentì˜ ëª¨ë“  ê²°ê³¼ë¬¼ì€ ê°€ìƒì˜ ì¬êµ¬ì„±ì…ë‹ˆë‹¤. 
        ì‹¤ì œ ì‚¬ê±´ì˜ ì¬í˜„ì´ ì•„ë‹ˆë©°, ì¹˜ë£Œì  ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 
        ë„ì›€ì´ í•„ìš”í•˜ì‹œë©´ ì „ë¬¸ ìƒë‹´ì„ ë°›ì•„ì£¼ì„¸ìš”.
      </div>

    </div>
  </main>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-content">
      <div class="spinner"></div>
      <h3 class="loading-title">ì˜ìƒì„ ìƒì„±í•˜ê³  ìˆì–´ìš”</h3>
      <p class="loading-text" id="loadingText">ìŠ¤í† ë¦¬ë³´ë“œ ìƒì„± ì¤‘...</p>
      <div class="loading-progress">
        <div class="loading-progress-bar" id="loadingBar"></div>
      </div>
      <div class="loading-steps">
        <div class="loading-step active" data-step="1">ìŠ¤í† ë¦¬ë³´ë“œ</div>
        <div class="loading-step" data-step="2">í‚¤í”„ë ˆì„</div>
        <div class="loading-step" data-step="3">ì˜ìƒ ìƒì„±</div>
        <div class="loading-step" data-step="4">í›„ì²˜ë¦¬</div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
  <style>
    /* Rewrite Page Specific Styles */
    .rewrite-toggle {
      margin-bottom: 24px;
    }

    .toggle-switch {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      cursor: pointer;
    }

    .toggle-switch input {
      display: none;
    }

    .toggle-slider {
      width: 52px;
      height: 28px;
      background: var(--bg-tertiary);
      border-radius: 14px;
      position: relative;
      transition: background var(--transition-fast);
      flex-shrink: 0;
    }

    .toggle-slider::after {
      content: '';
      position: absolute;
      top: 3px;
      left: 3px;
      width: 22px;
      height: 22px;
      background: white;
      border-radius: 50%;
      transition: transform var(--transition-fast);
    }

    .toggle-switch input:checked + .toggle-slider {
      background: var(--accent-primary);
    }

    .toggle-switch input:checked + .toggle-slider::after {
      transform: translateX(24px);
    }

    .toggle-label {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .toggle-title {
      font-weight: 600;
      font-size: 1.1rem;
    }

    .toggle-desc {
      font-size: 0.9rem;
      color: var(--text-tertiary);
    }

    .rewrite-content {
      display: none;
    }

    .rewrite-content.show {
      display: block;
    }

    .safety-notice {
      display: flex;
      gap: 16px;
      padding: 20px;
      background: rgba(240, 180, 41, 0.08);
      border: 1px solid rgba(240, 180, 41, 0.2);
      border-radius: var(--radius-lg);
      margin-bottom: 32px;
    }

    .safety-icon {
      font-size: 1.5rem;
      flex-shrink: 0;
    }

    .safety-text strong {
      display: block;
      margin-bottom: 4px;
      color: var(--accent-primary);
    }

    .safety-text p {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin: 0;
    }

    .rewrite-section {
      margin-bottom: 32px;
    }

    .rewrite-section-title {
      font-size: 1.125rem;
      margin-bottom: 8px;
    }

    .rewrite-section-desc {
      color: var(--text-tertiary);
      font-size: 0.9rem;
      margin-bottom: 16px;
    }

    /* Distance Cards */
    .distance-options {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }

    .distance-card {
      cursor: pointer;
    }

    .distance-card input {
      display: none;
    }

    .distance-card-inner {
      padding: 24px 16px;
      background: var(--bg-secondary);
      border: 2px solid transparent;
      border-radius: var(--radius-lg);
      text-align: center;
      transition: all var(--transition-base);
    }

    .distance-card:hover .distance-card-inner {
      background: var(--bg-tertiary);
      border-color: rgba(255, 255, 255, 0.1);
    }

    .distance-card.active .distance-card-inner,
    .distance-card input:checked + .distance-card-inner {
      border-color: var(--accent-primary);
      background: rgba(240, 180, 41, 0.08);
    }

    .distance-icon {
      font-size: 2rem;
      margin-bottom: 12px;
    }

    .distance-title {
      font-weight: 600;
      margin-bottom: 8px;
    }

    .distance-desc {
      font-size: 0.8rem;
      color: var(--text-tertiary);
      line-height: 1.4;
    }

    /* Ending Options */
    .ending-options {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }

    .ending-card {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 16px;
      background: var(--bg-secondary);
      border: 2px solid transparent;
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--transition-base);
    }

    .ending-card input {
      display: none;
    }

    .ending-card:hover {
      background: var(--bg-tertiary);
      border-color: rgba(255, 255, 255, 0.1);
    }

    .ending-card.active,
    .ending-card:has(input:checked) {
      border-color: var(--accent-primary);
      background: rgba(240, 180, 41, 0.08);
    }

    .ending-emoji {
      font-size: 1.25rem;
    }

    .ending-text {
      font-weight: 500;
      font-size: 0.95rem;
    }

    /* What Happens */
    .what-happens {
      background: var(--bg-secondary);
    }

    .what-happens h4 {
      margin-bottom: 16px;
    }

    .what-happens ul {
      list-style: none;
    }

    .what-happens li {
      position: relative;
      padding-left: 24px;
      padding-bottom: 12px;
      font-size: 0.9rem;
      color: var(--text-secondary);
    }

    .what-happens li::before {
      content: 'â†’';
      position: absolute;
      left: 0;
      color: var(--accent-primary);
    }

    .what-happens li:last-child {
      padding-bottom: 0;
    }

    .what-happens strong {
      color: var(--text-primary);
    }

    .actions-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .actions-right {
      display: flex;
      gap: 12px;
    }

    /* Loading Overlay */
    .loading-overlay {
      display: none;
    }

    .loading-overlay.show {
      display: flex;
    }

    .loading-content {
      text-align: center;
    }

    .loading-title {
      margin-top: 24px;
      margin-bottom: 8px;
      font-size: 1.5rem;
    }

    .loading-text {
      color: var(--text-secondary);
      margin-bottom: 24px;
    }

    .loading-progress {
      width: 300px;
      margin: 0 auto 24px;
    }

    .loading-steps {
      display: flex;
      justify-content: center;
      gap: 24px;
    }

    .loading-step {
      font-size: 0.85rem;
      color: var(--text-muted);
      position: relative;
    }

    .loading-step.active {
      color: var(--accent-primary);
    }

    .loading-step.completed {
      color: var(--success);
    }

    .loading-step.completed::before {
      content: 'âœ“ ';
    }

    @media (max-width: 768px) {
      .distance-options {
        grid-template-columns: 1fr;
      }

      .ending-options {
        grid-template-columns: repeat(2, 1fr);
      }

      .actions-row {
        flex-direction: column;
        gap: 16px;
      }

      .actions-right {
        width: 100%;
        flex-direction: column;
      }

      .actions-right .btn {
        width: 100%;
      }

      .loading-steps {
        flex-wrap: wrap;
        gap: 12px;
      }
    }
  </style>
  <script>
    // Rewrite functionality
    const rewriteEnabled = document.getElementById('rewriteEnabled');
    const rewriteContent = document.getElementById('rewriteContent');
    const eventText = document.getElementById('eventText');
    const charCount = document.getElementById('charCount');
    const generateBtn = document.getElementById('generateBtn');
    const skipBtn = document.getElementById('skipBtn');
    const loadingOverlay = document.getElementById('loadingOverlay');

    // Toggle rewrite content
    rewriteEnabled.addEventListener('change', () => {
      if (rewriteEnabled.checked) {
        rewriteContent.classList.add('show');
      } else {
        rewriteContent.classList.remove('show');
      }
    });

    // Character count
    eventText.addEventListener('input', () => {
      charCount.textContent = eventText.value.length;
    });

    // Distance selection
    document.querySelectorAll('.distance-card').forEach(card => {
      card.addEventListener('click', () => {
        document.querySelectorAll('.distance-card').forEach(c => c.classList.remove('active'));
        card.classList.add('active');
      });
    });

    // Ending selection
    document.querySelectorAll('.ending-card').forEach(card => {
      card.addEventListener('click', () => {
        document.querySelectorAll('.ending-card').forEach(c => c.classList.remove('active'));
        card.classList.add('active');
      });
    });

    // Generate function
    function startGeneration() {
      // Store rewrite data
      if (rewriteEnabled.checked) {
        sessionStorage.setItem('rewriteEnabled', 'true');
        sessionStorage.setItem('rewriteText', eventText.value);
        sessionStorage.setItem('distance', document.querySelector('[name="distance"]:checked').value);
        sessionStorage.setItem('ending', document.querySelector('[name="ending"]:checked').value);
      } else {
        sessionStorage.setItem('rewriteEnabled', 'false');
      }

      // Show loading
      loadingOverlay.classList.add('show');

      // Simulate generation progress
      const loadingText = document.getElementById('loadingText');
      const loadingBar = document.getElementById('loadingBar');
      const steps = document.querySelectorAll('.loading-step');
      
      const stages = [
        { text: 'ìŠ¤í† ë¦¬ë³´ë“œ ìƒì„± ì¤‘...', progress: 25, step: 1 },
        { text: 'í‚¤í”„ë ˆì„ ì´ë¯¸ì§€ ìƒì„± ì¤‘...', progress: 50, step: 2 },
        { text: 'ì˜ìƒì„ ìƒì„±í•˜ê³  ìˆì–´ìš”...', progress: 75, step: 3 },
        { text: 'ë§ˆë¬´ë¦¬ ì¤‘...', progress: 95, step: 4 }
      ];

      let currentStage = 0;

      const interval = setInterval(() => {
        if (currentStage < stages.length) {
          const stage = stages[currentStage];
          loadingText.textContent = stage.text;
          loadingBar.style.width = stage.progress + '%';
          
          steps.forEach((s, i) => {
            if (i < stage.step - 1) {
              s.classList.remove('active');
              s.classList.add('completed');
            } else if (i === stage.step - 1) {
              s.classList.add('active');
              s.classList.remove('completed');
            } else {
              s.classList.remove('active', 'completed');
            }
          });
          
          currentStage++;
        } else {
          clearInterval(interval);
          loadingBar.style.width = '100%';
          
          // Navigate to result page
          setTimeout(() => {
            window.location.href = 'result.html';
          }, 500);
        }
      }, 1500);
    }

    // Event listeners
    generateBtn.addEventListener('click', startGeneration);
    skipBtn.addEventListener('click', () => {
      sessionStorage.setItem('rewriteEnabled', 'false');
      startGeneration();
    });
  </script>
</body>
</html>

